<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ›‹ï¸ Äá»“ Ná»™i Tháº¥t Store</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .grid-products { display:grid; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap:16px; }
    .product-card { border:1px solid #ddd; border-radius:8px; overflow:hidden; cursor:pointer; }
    .card-media img { width:100%; height:150px; object-fit:cover; }
    .card-body { padding:8px; }
    .price { font-weight:bold; color:#e74c3c; }
    .product-actions { margin-top:8px; display:flex; gap:4px; }
    .small-btn { padding:2px 6px; font-size:12px; }
  </style>
</head>
<body>
<header class="navbar">
  <div class="nav-container">
    <a class="nav-logo" href="index.html">
      <div class="logo-mark">ğŸ›‹ï¸</div>
      <div class="logo-text">Äá»“ Ná»™i Tháº¥t <span>Store</span></div>
    </a>
    <nav class="main-nav" aria-label="ChuyÃªn má»¥c">
      <a href="#" onclick="filterCategory('all');return false;">Táº¥t cáº£</a>
      <a href="#" onclick="filterCategory('PhÃ²ng khÃ¡ch');return false;">PhÃ²ng khÃ¡ch</a>
      <a href="#" onclick="filterCategory('PhÃ²ng ngá»§');return false;">PhÃ²ng ngá»§</a>
      <a href="#" onclick="filterCategory('PhÃ²ng báº¿p');return false;">PhÃ²ng báº¿p</a>
      <a href="#" onclick="filterCategory('VÄƒn phÃ²ng');return false;">VÄƒn phÃ²ng</a>
      <a href="#" onclick="filterCategory('Trang trÃ­');return false;">Trang trÃ­</a>
    </nav>
    <div class="nav-user" onclick="toggleDropdown()" tabindex="0" role="button">
      <img id="avatar" class="user-avatar" src="avatar.jpg" alt="avatar" />
      <div class="user-meta">
        <div id="usernameDisplay" class="username"></div>
        <div class="small-muted">TÃ i khoáº£n</div>
      </div>
      <div id="dropdown" class="dropdown-menu">
        <a href="add-do.html">â• ThÃªm Ä‘á»“</a>
        <a href="settings.html">âš™ CÃ i Ä‘áº·t</a>
        <a href="#" onclick="logout(); return false;">ğŸšª ÄÄƒng xuáº¥t</a>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <section style="margin-top: 26px;">
    <h2>Bá»™ sÆ°u táº­p</h2>
    <p id="count" class="muted"></p>
    <div id="productList" class="grid-products"></div>

    <div class="pagination">
      <button class="btn ghost" onclick="prevPage()">â—€ TrÆ°á»›c</button>
      <span id="pageInfo" class="page-info"></span>
      <button class="btn ghost" onclick="nextPage()">Tiáº¿p â–¶</button>
    </div>
  </section>
</main>

<script>
let products = [];
let allProducts = [];
let page = 1;
const perPage = 6;

// 20 sáº£n pháº©m máº«u vá»›i ID cá»‘ Ä‘á»‹nh
const sampleProducts = [
  {id:"p1", name:"SOFA GIÆ¯á»œNG CEASAR", category:"PhÃ²ng khÃ¡ch", price:16300000, image:"https://cdn.hshttps://cdn.hstatic.net/products/200000295856/sofa-bed-_lusf08_4b07bb16b42840768b6dd60dae86dc9a.jpgtatic.net/products/200000295856/sofa-bed-_lusf09_3__8a76254ea7bd47cdb1ef460050c2a1cb.jpg", desc:"Sofa giÆ°á»ng Ä‘a nÄƒng, mÃ u xÃ¡m sang trá»ng."},
  {id:"p2", name:"BÃ n trÃ  gá»—", category:"PhÃ²ng khÃ¡ch", price:1200000, creator:"admin", image:"https://cdn.hstatic.net/products/ban-tra.jpg", desc:"BÃ n trÃ  gá»— nhá» gá»n."},
  {id:"p3", name:"Tá»§ ká»‡ TV", category:"PhÃ²ng khÃ¡ch", price:3500000, creator:"admin", image:"https://cdn.hstatic.net/products/tu-tv.jpg", desc:"Tá»§ ká»‡ TV hiá»‡n Ä‘áº¡i."},
  {id:"p4", name:"GiÆ°á»ng ngá»§ gá»—", category:"PhÃ²ng ngá»§", price:7000000, creator:"admin", image:"https://cdn.hstatic.net/products/giuong-ngu.jpg", desc:"GiÆ°á»ng ngá»§ gá»— cháº¯c cháº¯n."},
  {id:"p5", name:"Tá»§ quáº§n Ã¡o", category:"PhÃ²ng ngá»§", price:4000000, creator:"admin", image:"https://cdn.hstatic.net/products/tu-quan-ao.jpg", desc:"Tá»§ quáº§n Ã¡o tiá»‡n lá»£i."},
  {id:"p6", name:"BÃ n há»c sinh", category:"PhÃ²ng ngá»§", price:1200000, creator:"admin", image:"https://cdn.hstatic.net/products/ban-hoc.jpg", desc:"BÃ n há»c sinh gá»n nháº¹."},
  {id:"p7", name:"BÃ n Äƒn trÃ²n", category:"PhÃ²ng báº¿p", price:3000000, creator:"admin", image:"https://cdn.hstatic.net/products/ban-an.jpg", desc:"BÃ n Äƒn trÃ²n 4 gháº¿."},
  {id:"p8", name:"Gháº¿ Äƒn", category:"PhÃ²ng báº¿p", price:800000, creator:"admin", image:"https://cdn.hstatic.net/products/ghe-an.jpg", desc:"Gháº¿ Äƒn thoáº£i mÃ¡i."},
  {id:"p9", name:"Tá»§ láº¡nh mini", category:"PhÃ²ng báº¿p", price:2500000, creator:"admin", image:"https://cdn.hstatic.net/products/tu-lanh.jpg", desc:"Tá»§ láº¡nh mini tiáº¿t kiá»‡m Ä‘iá»‡n."},
  {id:"p10", name:"BÃ n lÃ m viá»‡c", category:"VÄƒn phÃ²ng", price:2000000, creator:"admin", image:"https://cdn.hstatic.net/products/ban-lam-viec.jpg", desc:"BÃ n lÃ m viá»‡c vÄƒn phÃ²ng."},
  {id:"p11", name:"Gháº¿ vÄƒn phÃ²ng", category:"VÄƒn phÃ²ng", price:1500000, creator:"admin", image:"https://cdn.hstatic.net/products/ghe-van-phong.jpg", desc:"Gháº¿ xoay Ãªm Ã¡i."},
  {id:"p12", name:"Ká»‡ sÃ¡ch", category:"VÄƒn phÃ²ng", price:1800000, creator:"admin", image:"https://cdn.hstatic.net/products/ke-sach.jpg", desc:"Ká»‡ sÃ¡ch 3 táº§ng."},
  {id:"p13", name:"Tranh treo tÆ°á»ng", category:"Trang trÃ­", price:600000, creator:"admin", image:"https://cdn.hstatic.net/products/tranh-treo.jpg", desc:"Tranh canvas phong cÃ¡ch hiá»‡n Ä‘áº¡i."},
  {id:"p14", name:"ÄÃ¨n bÃ n", category:"Trang trÃ­", price:400000, creator:"admin", image:"https://cdn.hstatic.net/products/den-ban.jpg", desc:"ÄÃ¨n bÃ n Ã¡nh sÃ¡ng vÃ ng."},
  {id:"p15", name:"Tháº£m tráº£i sÃ n", category:"Trang trÃ­", price:900000, creator:"admin", image:"https://cdn.hstatic.net/products/tham.jpg", desc:"Tháº£m tráº£i sÃ n Ãªm Ã¡i."},
  {id:"p16", name:"Gháº¿ bÃ nh thÆ° giÃ£n", category:"PhÃ²ng khÃ¡ch", price:4500000, creator:"admin", image:"https://cdn.hstatic.net/products/ghe-banh.jpg", desc:"Gháº¿ bÃ nh thoáº£i mÃ¡i."},
  {id:"p17", name:"BÃ n console", category:"PhÃ²ng khÃ¡ch", price:2200000, creator:"admin", image:"https://cdn.hstatic.net/products/ban-console.jpg", desc:"BÃ n console trang trÃ­."},
  {id:"p18", name:"GiÆ°á»ng táº§ng tráº» em", category:"PhÃ²ng ngá»§", price:6500000, creator:"admin", image:"https://cdn.hstatic.net/products/giuong-tang.jpg", desc:"GiÆ°á»ng táº§ng cho bÃ©."},
  {id:"p19", name:"Gháº¿ bar", category:"PhÃ²ng báº¿p", price:900000, creator:"admin", image:"https://cdn.hstatic.net/products/ghe-bar.jpg", desc:"Gháº¿ bar cao cáº¥p."},
  {id:"p20", name:"ÄÃ¨n tráº§n hiá»‡n Ä‘áº¡i", category:"Trang trÃ­", price:1200000, creator:"admin", image:"https://cdn.hstatic.net/products/den-tran.jpg", desc:"ÄÃ¨n tráº§n phong cÃ¡ch hiá»‡n Ä‘áº¡i."}
];

// LÆ°u sampleProducts vÃ o localStorage náº¿u chÆ°a cÃ³
if(!localStorage.getItem("products")){
  localStorage.setItem("products", JSON.stringify(sampleProducts));
}

// Load products tá»« localStorage
let currentUser = JSON.parse(localStorage.getItem("currentUser") || "{}");
allProducts = JSON.parse(localStorage.getItem("products") || "[]");
products = [...allProducts];

// Hiá»ƒn thá»‹
function render() {
  const start = (page-1)*perPage;
  const list = products.slice(start, start+perPage);
  document.getElementById("count").textContent = "Tá»•ng sá»‘: " + allProducts.length + " sáº£n pháº©m";
  document.getElementById("productList").innerHTML = list.map(p=>{
    const isCreator = currentUser.username === p.creator;
    const priceText = p.price ? Number(p.price).toLocaleString('vi-VN')+" Ä‘" : "(ChÆ°a cÃ³ giÃ¡)";
    const actionButtons = isCreator ? `
      <div class="product-actions">
        <button class="btn small-btn ghost" onclick="event.stopPropagation(); editProduct('${p.id}')">Sá»­a</button>
        <button class="btn small-btn danger" onclick="event.stopPropagation(); deleteProduct('${p.id}')">XÃ³a</button>
      </div>` : "";
    return `<div class="product-card" onclick="goDetail('${p.id}')">
      <div class="card-media"><img src="${p.image}" alt="${p.name}"></div>
      <div class="card-body">
        <h3>${p.name}</h3>
        <div class="meta-row"><span class="muted">${p.category}</span> <span class="price">${priceText}</span></div>
        <div class="card-foot"><div class="posted-by">ÄÄƒng: <b>${p.creator}</b></div>${actionButtons}</div>
      </div>
    </div>`;
  }).join("");
  document.getElementById("pageInfo").textContent = `Trang ${page} / ${Math.max(1, Math.ceil(products.length/perPage))}`;
}

function goDetail(id){ alert("Chi tiáº¿t sáº£n pháº©m: "+id); }
function editProduct(id){ location.href="add-do.html?id="+id; }
function deleteProduct(id){
  if(!confirm("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a sáº£n pháº©m nÃ y?")) return;
  products = products.filter(p=>p.id!==id);
  allProducts = products;
  localStorage.setItem("products", JSON.stringify(allProducts));
  render();
}
function nextPage(){ if(page*perPage<products.length) page++; render(); }
function prevPage(){ if(page>1) page--; render(); }
function toggleDropdown(){ document.getElementById("dropdown").classList.toggle("show"); }
function logout(){ localStorage.removeItem("currentUser"); location.href="login.html"; }
function filterCategory(cat){
  if(cat==="all") products=[...allProducts];
  else products = allProducts.filter(p=>p.category===cat);
  page=1; render();
}

document.getElementById("usernameDisplay").textContent = currentUser.fullname||"KhÃ¡ch";
document.getElementById("avatar").src = currentUser.avatar||"avatar.jpg";
render();
</script>
</body>
</html>
